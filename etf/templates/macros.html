{% macro input(name, label, placeholder='', type='text', min='', required=false) -%}
<div class="form-group {{errors.get(name) and 'error'}}" for="{{name}}">
  <label class="label">{{label}}</label>
  {{input_description(name)}}
  <input aria-describedby="{{name}}-tt" placeholder="{{placeholder}}" type="{{type}}" class="full-width" value="{{data.get(name)}}" id="{{name}}" {% if required == true %}required{% endif %} name="{{name}}">
  {% for error in errors.get(name, []) %}
    <div class="helper">{{error}}</div>
  {% endfor %}

  {{macros.guidance(name=name, label="Additional guidance")}}
</div>
{%- endmacro %}


{% macro input_date(name, label, placeholder='') -%}
<div class="form-group {{errors.get(name) and 'error'}}">
  <label class="label" for="{{name}}">{{label}}</label>
  {{input_description(name)}}

  <div class="date-picker">
  <input aria-describedby="{{name}}-tt" placeholder="{{placeholder}}" type="date" value="{{data.get(name)}}" id="{{name}}" name="{{name}}" class="full-width">
  </div>
  {% for error in errors.get(name, []) %}
    <div class="helper">{{error}}</div>
  {% endfor %}

  {{macros.guidance(name=name, label="Additional guidance")}}
  
</div>
{%- endmacro %}


{% macro guidance(name, label) -%}
{% set guidance = get_field_guidance_text(object_name, name) %}
{% if guidance %}
<hint-box aria-label="{{label}}">
  <div class="content">
    {% for para in guidance %}
      <p>{{markdown(para) | safe}}</p>
    {% endfor %}
  </div>
</hint-box>
{% endif %}
{%- endmacro %}


{%- macro input_description(name) %}
  {% set description = get_field_help_text(object_name, name) %}
  {% if description %}
    <p class="description">{{description}}</p>
  {% endif %}
{%- endmacro %}


{% macro textarea(name, label, placeholder='') -%}
<div class="form-group {{errors.get(name) and 'error'}}">
  <label for="{{name}}">{{label}}</label>
  {{input_description(name)}}
  <textarea placeholder="{{placeholder}}" id="{{name}}" name="{{name}}" class="full-width">{{data.get(name)}}</textarea>
  {% for error in errors.get(name, []) %}
    <div class="helper">{{error}}</div>
  {% endfor %}
  {{macros.guidance(name=name, label="Additional guidance")}}
</div>
{%- endmacro %}

{% macro select(name, label, options, empty_option=DEFAULT) -%}

  <div class="form-group {{errors.get(name) and 'error'}}">
    <label for="{{name}}">{{label}}</label>
    
    {{input_description(name)}}

    <div is="select-field">
      <select name="{{name}}" id="{{name}}" class="full-width">
        {% if not empty_option is sameas DEFAULT %}
          <option value="" disabled {{is_empty_selected(data, name)}}>{{empty_option}}</option>
        {% endif %}
        {% for option in options %}
          <option value="{{option.value}}" {{is_selected(data, name, option.value)}}>{{option.text}}</option>
        {% endfor %}
      </select>
    </div>
    {{macros.guidance(name=name, label="Additional guidance")}}
  </div>
{%- endmacro %}


{% macro select_many_from_list(name, label, list) -%}
<div class="form-group {{errors.get(name) and 'error'}}">
  <label for="{{name}}">{{label}}</label>
  {{input_description(name)}}

  <div is="multi-select">  
    <select multiple name="{{name}}" id="{{name}}" class="full-width">
      {% for item in list %}
        <option value="{{item[0]}}" {{is_in(data, name, item[0])}}>{{item[1]}}</option>
      {% endfor %}
    </select>
  </div>
  {{macros.guidance(name=name, label="Additional guidance")}}
  
</div>
{%- endmacro %}

{% macro checkbox_from_list(name, label, list, empty_option=DEFAULT, other_specify=true) -%}
  <fieldset>
    <legend>
      {{label}}
    </legend>
    {{input_description(name)}}
    {% for item in list %}
    <div class="form-group">
      <label class="checkbox">
        <input type="checkbox" {{is_in(data, name, item[0]) and checked}} name="{{name}}" value="{{item[0]}}">
        <span class="checkmark"></span>
        <span>{{item[1]}}</span>
      </label>
      {% endfor %}
      {% if other_specify %}
        <div class="form-group controller-subfield" id="conditional-dyt6y3i">
          {{input(name+"_other", "If "+label+" is 'Other', please provide more detail")}}
        </div>
      {% endif %}
    </div>
  </fieldset>
  {{macros.guidance(name=name, label="Additional guidance")}}
{%- endmacro %}

{% macro radios(name, label, list) -%}
  <fieldset>
    <legend>
      {{label}}
    </legend>
    {{input_description(name)}}
    {% for item in list %}
    <div class="form-group">
      <label class="radio">
        <input type="radio" {{is_selected(data, name, item[0]) and checked}} name="{{name}}" value="{{item[0]}}">
        <span class="checkmark"></span>
        <span>{{item[1]}}</span>
      </label>
      {% endfor %}
    </div>
  </fieldset>
  {{macros.guidance(name=name, label="Additional guidance")}}
{%- endmacro %}

{% macro radios_from_list(name, label, list, empty_option=DEFAULT) -%}
  <fieldset>
    <legend>
      {{label}}
    </legend>
    {{input_description(name)}}
    {% for item in list %}
    <div class="form-group">
      <label class="radio">
        <input type="radio" {{is_selected(data, name, item[0]) and checked}} name="{{name}}" value="{{item[0]}}">
        <span class="checkmark"></span>
        <span>{{item[1]}}</span>
      </label>
      {% endfor %}
      <div class="form-group controller-subfield" id="conditional-dyt6y3i">
        {{input(name+"_other", "If "+label+" is 'Other', please provide more detail")}}
      </div>
    </div>
  </fieldset>
  {{macros.guidance(name=name, label="Additional guidance")}}
{%- endmacro %}

{% macro select_from_list(name, label, list, empty_option=DEFAULT) -%}
  {{select(name, label, list_to_options(list), empty_option="Please choose one...")}}
{%- endmacro %}

{% macro select_with_empty(name, label, options) -%}
  {{select(name, label, options, empty_option="Please choose one...")}}
{%- endmacro %}

{% macro yes_no(name, label) -%}
  {{select(name, label, options=({'text': '------', 'value': None}, {'text': 'Yes', 'value': 'YES'}, {'text': 'No', 'value': 'NO'}))}}
{%- endmacro %}


{% macro full_no_partial(name, label) -%}
  {{select(name, label, options=({'text': 'Full', 'value': 'Full'}, {'text': 'No', 'value': 'No'}, {'text': 'Partial', 'value': 'Partial'}), empty_option='No')}}
{%- endmacro %}

{% macro checkbox(name, label) -%}
  <label class="checkbox {{errors.get(name) and 'error'}}">
    <input type="checkbox" id="{{name}}" name="{{name}}" {{data.get(name) and 'checked' or ''}}>
    <span class="checkmark"></span>
    <span>{{label}}</span>
  </label>
  {% for error in errors.get(name, []) %}
  <span class="helper">{{error}}</span>
  {% endfor %}
{%- endmacro %}


{% macro buttons(prev_url, completed_page=None, next_url=None, id=None) -%}
  <footer class="actions">
    <div>
      <a href="{{ prev_url }}" class="bttn-quaternary small">Back</a>
      {% if id %}
          <a href="{{ url('evaluation-overview', id) }}" class="bttn-quaternary small">Cancel</a>
      {% endif %}
    </div>

    {% if next_url and completed_page %}
    <a href="{{next_url}}?completed={{completed_page}}" class="bttn-primary">Next</a>
  {% elif next_url and not completed_page %}
    <a href="{{next_url}}" class="bttn-primary">Next</a>
  {% else %}
    <button type="submit" class="bttn-primary">Save and next</button>
  {% endif %}


  </footer>
{%- endmacro %}


{% macro buttons_edit(object_name) -%}
  <div class="evaluation-button-row">
    <button type="submit" name="edit" class="button float-right">Edit {{object_name}} <i class="bi-caret-right"></i></button>
  </div>
{%- endmacro %}


{% macro add_another_button(prev_obj_url, object_name) -%}
  <div class="evaluation-button-row">
    <a href="{{prev_obj_url}}" class="button float-left"><i class="bi-caret-left"></i> Previous {{object_name}}</a>
    <button type="submit" name="add" class="padding-left button float-right">Save and add another {{object_name}} <i class="bi-file-earmark-plus"></i></button>
  </div>
{%- endmacro %}


{% macro return_summary_button(object_name) -%}
  
    <button type="submit" name="return" class="bttn-primary">Save</button>
  
{%- endmacro %}


{% macro delete_button(object_name) -%}
<button type="submit" name="delete" class="bttn-negative small">Delete</button>  
{%- endmacro %}

{% macro callout(tags) -%}
  <div class="callout {{tags}}" data-closable>
    {{caller()}}
  </div>
{%- endmacro %}

{% macro display_simple_value(name, label, value=None) -%}
  <label class="label" for="{{name}}">{{label}}</label>
  {% if not value and not data[name] %}
    <p>N/A</p>
  {% else %}
    {% if value %}
      <p>{{value}}</p>
    {% else %}
      <p>{{data[name]}}</p>
    {% endif %}
    {% endif %}
{%- endmacro %}

{% macro display_list_value(name, label, value=None) -%}
  <label class="label" for="{{name}}">{{label}}</label>

  {% if not value and not data[name] %}
    <p>N/A</p>
  {% else %}
    <ul>
    {% if value %}
      {% for val in value %}
        <li>{{val}}</li>
      {% endfor %}
    {% else %}
      {% for val in data[name] %}
        <li>{{val}}</li>
      {% endfor %}
    {% endif %}
    </ul>
  {% endif %}
{%- endmacro %}


{%- macro field_help_text(name)  %}
  {% set short_description = get_field_help_text(object_name, name) %}
  {% if short_description %}
    {{markdown(short_description, "subheader")|safe}}
  {% endif %}
{%- endmacro  %}

{%- macro add_svg(fill="currentColor", width="1em", height="1em") %}
  <svg width="{{width}}" height="{{height}}" viewBox="0 0 24 24" fill="{{fill}}" xmlns="http://www.w3.org/2000/svg">
    <path fill-rule="evenodd" clip-rule="evenodd" d="M14 2H10V10H2V14H10V22H14V14H22V10H14V2Z" fill="{{fill}}"/>
  </svg>
{%- endmacro %}

{%- macro arrow_down_svg(fill="currentColor", width="1em", height="1em") %}
  <svg width="{{width}}" height="{{height}}" viewBox="0 0 24 24" fill="{{fill}}" xmlns="http://www.w3.org/2000/svg">
    <path d="M12.9493 23.6164L21.6168 14.9491C21.8642 14.7017 22 14.372 22 14.0204C22 13.6684 21.864 13.3388 21.6168 13.0914L20.8297 12.3045C20.5826 12.0573 20.2527 11.9211 19.9009 11.9211C19.5493 11.9211 19.2082 12.0573 18.9612 12.3045L13.8937 17.3608L13.8937 1.29657C13.8937 0.572288 13.3267 0 12.6022 0L11.4895 0C10.765 0 10.1408 0.572288 10.1408 1.29657L10.1408 17.4182L5.04502 12.3047C4.79761 12.0575 4.47663 11.9213 4.12483 11.9213C3.77342 11.9213 3.44776 12.0575 3.20055 12.3047L2.41597 13.0916C2.16856 13.339 2.03373 13.6686 2.03373 14.0206C2.03373 14.3722 2.17031 14.7019 2.41772 14.9493L11.085 23.6166C11.3332 23.8646 11.6645 24.001 12.0167 24C12.37 24.0008 12.7015 23.8646 12.9493 23.6164Z" fill="{{fill}}"/>
  </svg>
{%- endmacro %}

{%- macro arrow_up_svg(fill="currentColor", width="1em", height="1em") %}
  <svg width="{{width}}" height="{{height}}" viewBox="0 0 24 24" fill="{{fill}}" xmlns="http://www.w3.org/2000/svg">
    <path d="M11.0843 0.38361L2.41691 9.05086C2.1695 9.29827 2.03369 9.62802 2.03369 9.97963C2.03369 10.3316 2.16969 10.6612 2.41691 10.9086L3.20402 11.6955C3.45105 11.9427 3.78099 12.0789 4.1328 12.0789C4.4844 12.0789 4.82547 11.9427 5.0725 11.6955L10.14 6.63917L10.14 22.7034C10.14 23.4277 10.707 24 11.4315 24H12.5442C13.2687 24 13.8929 23.4277 13.8929 22.7034L13.8929 6.5818L18.9887 11.6953C19.2361 11.9425 19.5571 12.0787 19.9089 12.0787C20.2603 12.0787 20.5859 11.9425 20.8331 11.6953L21.6177 10.9084C21.8651 10.661 22 10.3314 22 9.97943C22 9.62783 21.8634 9.29807 21.616 9.05066L12.9487 0.383415C12.7005 0.135416 12.3692 -0.00097084 12.017 3.8147e-06C11.6637 -0.000776291 11.3322 0.135416 11.0843 0.38361Z" fill="{{fill}}"/>
  </svg>
{%- endmacro %}

{%- macro search_svg(fill="currentColor", width="1em", height="1em") %}
  <svg width="{{width}}" height="{{height}}" viewBox="0 0 24 24" fill="{{fill}}" xmlns="http://www.w3.org/2000/svg">
    <path d="M21.5264 18.9713L16.9282 14.3728C17.7095 13.129 18.1629 11.659 18.1629 10.0813C18.1629 5.61786 14.5446 2 10.0813 2C5.61803 2 2 5.61786 2 10.0813C2 14.5449 5.61786 18.1624 10.0813 18.1624C11.7982 18.1624 13.3885 17.6257 14.6971 16.7136L19.2405 21.2573C19.5562 21.5727 19.9701 21.7298 20.3835 21.7298C20.7973 21.7298 21.2107 21.5727 21.5269 21.2573C22.1578 20.6257 22.1578 19.6027 21.5264 18.9713ZM10.0813 15.5442C7.06453 15.5442 4.61873 13.0986 4.61873 10.0816C4.61873 7.0647 7.06453 4.6189 10.0813 4.6189C13.0982 4.6189 15.5439 7.0647 15.5439 10.0816C15.5439 13.0986 13.0982 15.5442 10.0813 15.5442Z" fill="{{fill}}"/>
  </svg>
{%- endmacro %}

{%- macro tick_svg(fill="currentColor", width="1em", height="1em") %}
  <svg width="{{width}}" height="{{height}}" viewBox="0 0 24 24" fill="{{fill}}" xmlns="http://www.w3.org/2000/svg">
    <path d="M21.9181 7.18763L9.51771 19.588C9.40849 19.6972 9.23163 19.6972 9.12266 19.588L2.08173 12.5468C1.97276 12.4381 1.97276 12.2612 2.08173 12.152L3.79258 10.4412C3.90181 10.3322 4.07866 10.3322 4.18763 10.4412L9.32044 15.5737L19.8124 5.08173C19.9219 4.97276 20.0983 4.97276 20.2075 5.08173L21.9181 6.79258C22.0273 6.90155 22.0273 7.07815 21.9181 7.18763Z" fill="{{fill}}"/>
  </svg>
{%- endmacro %}

{%- macro pencil_svg()  %}
<gov-icon key="pencil"></gov-icon>
{%- endmacro %}

{%- macro cross_svg() %}
<gov-icon key="cross"></gov-icon>
{%- endmacro %}